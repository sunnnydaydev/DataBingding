# 前言

绑定适配器的作用就是，调用控件合适的方法，给控件属性进行赋值。

举个安卓默认例子：

textView控件有个text属性,当在xml中配置text="args"时，android解析到这个属性时会自动寻找 TextView#setText方法：
- 当args为int类型则调用setText(@StringRes int resid)
- 当args为String类型则调用setText(CharSequence text)

DataBinding的绑定适配器可以让你决定给控件属性赋值调用哪个方法，还可以让你自己定制该方法的具体逻辑。

# 设定属性值

当数据发生变化时，绑定类必须调用控件的合适的 set() 方法，给 view 属性赋值。这时候有三种选择：

- 自动选择方法
- 指定自定义的方法名称
- 提供自定义的逻辑

###### 1、自动选择方法

我们平时使用DataBinding时就是默认使用这个规则的。这个规则和上面"安卓默认栗子"一样。而且DataBinding功能更加强大属性
可以"无中生有"，只要view有对应的setXXX方法，我们就可使用xxx属性。 比如，TextView 并没有 android:onClickListener 
属性，但却有 setOnClickListener(OnClickListener l)方法， 这时我们仍然可以使用命名空间的属性 android:setOnClickListener：

```kotlin
/**
 * Create by SunnyDay 2022/06/23 20:40:09
 */
class MyOnClickListener:View.OnClickListener {
    override fun onClick(v: View?) {
        Log.d("tag","onClick")
    }
}

```
```kotlin
class AdapterActivity : AppCompatActivity() {
    private val binding: ActivityAdapterBinding by lazy {
        DataBindingUtil.setContentView(this@AdapterActivity, R.layout.activity_adapter)
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding.listener = MyOnClickListener()
    }

}
```

```xml
<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <data>
       <variable
           name="listener"
           type="com.example.databingding.others.MyOnClickListener" />
    </data>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:gravity="center">
<!-- 把listener 设置给他就行，因为View 本身onClickListener接受的参数就是listener。
      DataBinding自定帮我们把这个listener设置给view的setonClickListener方法上。
-->
        <androidx.appcompat.widget.AppCompatTextView
            android:id="@+id/btn"
            android:text="按钮"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClickListener="@{listener}"
            tools:ignore="HardcodedText" />

    </LinearLayout>
</layout>
```
可见把OnClickListener类型变量直接设置给xml属性就行（只要setXXX方法存在就可无中生有出xxx属性）。

因为View#setonClickListener接受的参数类型是OnClickListener类型，我们在xml中使用属性时， 
DataBinding自动帮我们把这个listener设置给view的setonClickListener方法上。

注意点：
- 表达式的变量或者方法返回值类型必须与系统方法接收的参数类型一致。
- 属性命名空间是不考虑的， 寻找方法的唯一标准就是方法名和参数类型。

###### 2、指定自定义的方法名称

###### 3、提供自定义的逻辑

# 对象转换

参考：https://www.dandelioncloud.cn/article/details/1481072799501602817